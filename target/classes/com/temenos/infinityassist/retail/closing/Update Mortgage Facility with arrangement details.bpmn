<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.omg.org/bpmn20" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:bpsim="http://www.bpsim.org/schemas/1.0" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:drools="http://www.jboss.org/drools" id="_YAPzUGcREe26a_boTy7yow" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd http://www.jboss.org/drools drools.xsd http://www.bpsim.org/schemas/1.0 bpsim.xsd http://www.omg.org/spec/DD/20100524/DC DC.xsd http://www.omg.org/spec/DD/20100524/DI DI.xsd " exporter="jBPM Process Modeler" exporterVersion="2.0" targetNamespace="http://www.omg.org/bpmn20">
  <bpmn2:itemDefinition id="_requestIdItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_facilityIdItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_accountNumberItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_coreReferenceItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_authorizationItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_documentsListItem" structureRef="java.util.List"/>
  <bpmn2:itemDefinition id="_documentMapItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_additionalParamsItem" structureRef="java.util.Map"/>
  <bpmn2:itemDefinition id="_requestResponseItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_updateMetaDataRespItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_stageItem" structureRef="String"/>
  <bpmn2:itemDefinition id="_CD88045F-21E2-4F9B-B5B4-98204EE82249_multiInstanceItemType_document" structureRef="java.util.HashMap"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AdditionalParametersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_RequestIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ApplicationIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_CIFInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_DrawingIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ErrorProcessInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_FacilityIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ObjectNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_PartyIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ResultOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AdditionalParametersInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_FacilityIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_RequestIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ApplicationIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_CIFInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_DrawingIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ErrorProcessInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ObjectNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_PartyIdInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationOutputXItem" structureRef="String"/>
  <bpmn2:itemDefinition id="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ResultOutputXItem" structureRef="String"/>
  <bpmn2:process id="InfinityAssist.UpdateMortgageFacilitywitharrangementdetails" drools:packageName="com.temenos.infinityassist.retail.closing" drools:version="1.0" drools:adHoc="false" name="Update Mortgage Facility with arrangement details" isExecutable="true" processType="Public">
    <bpmn2:property id="requestId" itemSubjectRef="_requestIdItem" name="requestId"/>
    <bpmn2:property id="facilityId" itemSubjectRef="_facilityIdItem" name="facilityId"/>
    <bpmn2:property id="accountNumber" itemSubjectRef="_accountNumberItem" name="accountNumber"/>
    <bpmn2:property id="coreReference" itemSubjectRef="_coreReferenceItem" name="coreReference"/>
    <bpmn2:property id="authorization" itemSubjectRef="_authorizationItem" name="authorization"/>
    <bpmn2:property id="documentsList" itemSubjectRef="_documentsListItem" name="documentsList"/>
    <bpmn2:property id="documentMap" itemSubjectRef="_documentMapItem" name="documentMap"/>
    <bpmn2:property id="additionalParams" itemSubjectRef="_additionalParamsItem" name="additionalParams"/>
    <bpmn2:property id="requestResponse" itemSubjectRef="_requestResponseItem" name="requestResponse"/>
    <bpmn2:property id="updateMetaDataResp" itemSubjectRef="_updateMetaDataRespItem" name="updateMetaDataResp"/>
    <bpmn2:property id="stage" itemSubjectRef="_stageItem" name="stage"/>
    <bpmn2:sequenceFlow id="_633B273A-AC10-41D6-9354-6D4EB3034183" sourceRef="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C" targetRef="_CD88045F-21E2-4F9B-B5B4-98204EE82249"/>
    <bpmn2:sequenceFlow id="_EBF6A117-079A-4822-96FE-157A323D7203" sourceRef="_CD88045F-21E2-4F9B-B5B4-98204EE82249" targetRef="_282948BA-D78F-45AE-BDA1-2D88889A0EF3"/>
    <bpmn2:sequenceFlow id="_01938B01-C536-43D9-ACBF-D1BC23386514" sourceRef="_42953A40-6061-45F6-AF50-59D2B0BBFDEB" targetRef="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C"/>
    <bpmn2:task id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C" drools:taskName="OriginationServiceTask" name="getDocuments from LOS">
      <bpmn2:documentation id="_YAPzUWcREe26a_boTy7yow"><![CDATA[OriginationWorkItem/index.html]]></bpmn2:documentation>
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[getDocuments from LOS]]></drools:metaValue>
        </drools:metaData>
        <drools:onEntry-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[java.util.HashMap<String,String> additionalParam = new java.util.HashMap<String,String>();
additionalParam.put("requestId", (String) kcontext.getVariable("requestId"));
additionalParam.put("stage", stage);
kcontext.setVariable("additionalParams", additionalParam);

]]></drools:script>
        </drools:onEntry-script>
        <drools:onExit-script scriptFormat="http://www.java.com/java">
          <drools:script><![CDATA[//getting Document's ID and there metadata from LOSMS
//getting Documents which are related to Facility
com.temenos.infinityassist.InfinityAssistScripts.setDocumentListForArrangmentId(kcontext);]]></drools:script>
        </drools:onExit-script>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_01938B01-C536-43D9-ACBF-D1BC23386514</bpmn2:incoming>
      <bpmn2:outgoing>_633B273A-AC10-41D6-9354-6D4EB3034183</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_YAPzUmcREe26a_boTy7yow">
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AdditionalParametersInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AdditionalParametersInputXItem" name="AdditionalParameters"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_FacilityIdInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_FacilityIdInputXItem" name="FacilityId"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_RequestIdInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_RequestIdInputXItem" name="RequestId"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ApplicationIdInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ApplicationIdInputXItem" name="ApplicationId"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationInputXItem" name="Authorization"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_CIFInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_CIFInputXItem" name="CIF"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_DrawingIdInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_DrawingIdInputXItem" name="DrawingId"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ErrorProcessInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ErrorProcessInputXItem" name="ErrorProcess"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ObjectNameInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ObjectNameInputXItem" name="ObjectName"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputXItem" name="OperationName"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_PartyIdInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_PartyIdInputXItem" name="PartyId"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputXItem" name="ServiceName"/>
        <bpmn2:dataInput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
        <bpmn2:dataOutput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationOutputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationOutputXItem" name="Authorization"/>
        <bpmn2:dataOutput id="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ResultOutputX" drools:dtype="String" itemSubjectRef="__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ResultOutputXItem" name="Result"/>
        <bpmn2:inputSet id="_YAPzU2cREe26a_boTy7yow">
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AdditionalParametersInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_FacilityIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_RequestIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ApplicationIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_CIFInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_DrawingIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ErrorProcessInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ObjectNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_PartyIdInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_TaskNameInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_YAPzVGcREe26a_boTy7yow">
          <bpmn2:dataOutputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationOutputX</bpmn2:dataOutputRefs>
          <bpmn2:dataOutputRefs>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ResultOutputX</bpmn2:dataOutputRefs>
        </bpmn2:outputSet>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_YAPzVWcREe26a_boTy7yow">
        <bpmn2:sourceRef>additionalParams</bpmn2:sourceRef>
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AdditionalParametersInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzVmcREe26a_boTy7yow">
        <bpmn2:sourceRef>facilityId</bpmn2:sourceRef>
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_FacilityIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzV2cREe26a_boTy7yow">
        <bpmn2:sourceRef>requestId</bpmn2:sourceRef>
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_RequestIdInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzWGcREe26a_boTy7yow">
        <bpmn2:sourceRef>authorization</bpmn2:sourceRef>
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzWWcREe26a_boTy7yow">
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_YAPzWmcREe26a_boTy7yow">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzW2cREe26a_boTy7yow"><![CDATA[getDocuments]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzXGcREe26a_boTy7yow">_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_OperationNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzXWcREe26a_boTy7yow">
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_YAPzXmcREe26a_boTy7yow">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzX2cREe26a_boTy7yow"><![CDATA[CorporateLOSJSONService]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzYGcREe26a_boTy7yow">_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ServiceNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataInputAssociation id="_YAPzYWcREe26a_boTy7yow">
        <bpmn2:targetRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_TaskNameInputX</bpmn2:targetRef>
        <bpmn2:assignment id="_YAPzYmcREe26a_boTy7yow">
          <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzY2cREe26a_boTy7yow"><![CDATA[OriginationServiceTask]]></bpmn2:from>
          <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzZGcREe26a_boTy7yow">_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_TaskNameInputX</bpmn2:to>
        </bpmn2:assignment>
      </bpmn2:dataInputAssociation>
      <bpmn2:dataOutputAssociation id="_YAPzZWcREe26a_boTy7yow">
        <bpmn2:sourceRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_AuthorizationOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>authorization</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
      <bpmn2:dataOutputAssociation id="_YAPzZmcREe26a_boTy7yow">
        <bpmn2:sourceRef>_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_ResultOutputX</bpmn2:sourceRef>
        <bpmn2:targetRef>requestResponse</bpmn2:targetRef>
      </bpmn2:dataOutputAssociation>
    </bpmn2:task>
    <bpmn2:endEvent id="_282948BA-D78F-45AE-BDA1-2D88889A0EF3">
      <bpmn2:incoming>_EBF6A117-079A-4822-96FE-157A323D7203</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:startEvent id="_42953A40-6061-45F6-AF50-59D2B0BBFDEB">
      <bpmn2:outgoing>_01938B01-C536-43D9-ACBF-D1BC23386514</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:subProcess id="_CD88045F-21E2-4F9B-B5B4-98204EE82249" name="Multiple Instance Sub-process">
      <bpmn2:extensionElements>
        <drools:metaData name="elementname">
          <drools:metaValue><![CDATA[Multiple Instance Sub-process]]></drools:metaValue>
        </drools:metaData>
      </bpmn2:extensionElements>
      <bpmn2:incoming>_633B273A-AC10-41D6-9354-6D4EB3034183</bpmn2:incoming>
      <bpmn2:outgoing>_EBF6A117-079A-4822-96FE-157A323D7203</bpmn2:outgoing>
      <bpmn2:ioSpecification id="_YAPzZ2cREe26a_boTy7yow">
        <bpmn2:dataInput id="_CD88045F-21E2-4F9B-B5B4-98204EE82249_IN_COLLECTIONInputX" itemSubjectRef="_documentsListItem" name="IN_COLLECTION"/>
        <bpmn2:dataInput id="_CD88045F-21E2-4F9B-B5B4-98204EE82249_documentInputX" itemSubjectRef="_CD88045F-21E2-4F9B-B5B4-98204EE82249_multiInstanceItemType_document" name="document"/>
        <bpmn2:inputSet id="_YAPzaGcREe26a_boTy7yow">
          <bpmn2:dataInputRefs>_CD88045F-21E2-4F9B-B5B4-98204EE82249_IN_COLLECTIONInputX</bpmn2:dataInputRefs>
          <bpmn2:dataInputRefs>_CD88045F-21E2-4F9B-B5B4-98204EE82249_documentInputX</bpmn2:dataInputRefs>
        </bpmn2:inputSet>
        <bpmn2:outputSet id="_YAPzaWcREe26a_boTy7yow"/>
      </bpmn2:ioSpecification>
      <bpmn2:dataInputAssociation id="_YAPzamcREe26a_boTy7yow">
        <bpmn2:sourceRef>documentsList</bpmn2:sourceRef>
        <bpmn2:targetRef>_CD88045F-21E2-4F9B-B5B4-98204EE82249_IN_COLLECTIONInputX</bpmn2:targetRef>
      </bpmn2:dataInputAssociation>
      <bpmn2:multiInstanceLoopCharacteristics id="_YAPza2cREe26a_boTy7yow">
        <bpmn2:loopDataInputRef>_CD88045F-21E2-4F9B-B5B4-98204EE82249_IN_COLLECTIONInputX</bpmn2:loopDataInputRef>
        <bpmn2:inputDataItem xsi:type="bpmn2:tDataInput" id="document" itemSubjectRef="_CD88045F-21E2-4F9B-B5B4-98204EE82249_multiInstanceItemType_document" name="document"/>
      </bpmn2:multiInstanceLoopCharacteristics>
      <bpmn2:sequenceFlow id="_8C91D077-14E1-4619-ACED-80002006A750" sourceRef="_C6A9582E-C1E8-43E4-9119-793E93BBF126" targetRef="_C15A48E1-83F9-41DE-8979-20C1BDF23739"/>
      <bpmn2:sequenceFlow id="_0D75A34C-A54C-471C-9A54-9192421109E2" sourceRef="_2AF72E01-03EB-43C2-8083-DB77C819326A" targetRef="_C6A9582E-C1E8-43E4-9119-793E93BBF126"/>
      <bpmn2:startEvent id="_2AF72E01-03EB-43C2-8083-DB77C819326A">
        <bpmn2:outgoing>_0D75A34C-A54C-471C-9A54-9192421109E2</bpmn2:outgoing>
      </bpmn2:startEvent>
      <bpmn2:endEvent id="_C15A48E1-83F9-41DE-8979-20C1BDF23739">
        <bpmn2:incoming>_8C91D077-14E1-4619-ACED-80002006A750</bpmn2:incoming>
      </bpmn2:endEvent>
      <bpmn2:task id="_C6A9582E-C1E8-43E4-9119-793E93BBF126" drools:taskName="OriginationServiceTask" name="update ArrangmentId in Doc Metadata">
        <bpmn2:documentation id="_YAPzbGcREe26a_boTy7yow"><![CDATA[OriginationWorkItem/index.html]]></bpmn2:documentation>
        <bpmn2:extensionElements>
          <drools:metaData name="elementname">
            <drools:metaValue><![CDATA[update ArrangmentId in Doc Metadata
]]></drools:metaValue>
          </drools:metaData>
          <drools:onEntry-script scriptFormat="http://www.java.com/java">
            <drools:script><![CDATA[java.util.HashMap<String,String> additionalParam = new java.util.HashMap<String,String>();
additionalParam.put("category",document.get("category").toString());
additionalParam.put("documentType",document.get("documentType").toString());
additionalParam.put("documentStatus",document.get("documentStatus").toString());
additionalParam.put("documentId",document.get("documentId").toString());
additionalParam.put("lastChangeUserId",document.get("lastChangeUserId").toString());
additionalParam.put("lineOfBusiness",document.get("lineOfBusiness").toString());
additionalParam.put("isSystemGenerated",document.get("isSystemGenerated").toString());
additionalParam.put("arrangementId",document.get("arrangementId").toString());
additionalParam.put("stage",stage);
//dummy data
//additionalParam.put("metaDocumentName",document.get("metaDocumentName").toString());
//additionalParam.put("ownerSystemId","retail");
//additionalParam.put("documentGroup","journey-assist");
//additionalParam.put("newOwnerSystemId",document.get("newOwnerSystemId").toString());
//additionalParam.put("newDocumentGroup",document.get("newDocumentGroup").toString());
//additionalParam.put("fileInfo",document.get("fileInfo").toString());
//additionalParam.put("version",document.get("version").toString());
//additionalParam.put("action","UPDATE_METADATA");
kcontext.setVariable("additionalParams",additionalParam);]]></drools:script>
          </drools:onEntry-script>
        </bpmn2:extensionElements>
        <bpmn2:incoming>_0D75A34C-A54C-471C-9A54-9192421109E2</bpmn2:incoming>
        <bpmn2:outgoing>_8C91D077-14E1-4619-ACED-80002006A750</bpmn2:outgoing>
        <bpmn2:ioSpecification id="_YAPzbWcREe26a_boTy7yow">
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_AdditionalParametersInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AdditionalParametersInputXItem" name="AdditionalParameters"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputXItem" name="OperationName"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputXItem" name="ServiceName"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_RequestIdInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_RequestIdInputXItem" name="RequestId"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_ApplicationIdInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ApplicationIdInputXItem" name="ApplicationId"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationInputXItem" name="Authorization"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_CIFInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_CIFInputXItem" name="CIF"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_DrawingIdInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_DrawingIdInputXItem" name="DrawingId"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_ErrorProcessInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ErrorProcessInputXItem" name="ErrorProcess"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_FacilityIdInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_FacilityIdInputXItem" name="FacilityId"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_ObjectNameInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ObjectNameInputXItem" name="ObjectName"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_PartyIdInputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_PartyIdInputXItem" name="PartyId"/>
          <bpmn2:dataInput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_TaskNameInputX" drools:dtype="Object" name="TaskName"/>
          <bpmn2:dataOutput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationOutputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationOutputXItem" name="Authorization"/>
          <bpmn2:dataOutput id="_C6A9582E-C1E8-43E4-9119-793E93BBF126_ResultOutputX" drools:dtype="String" itemSubjectRef="__C6A9582E-C1E8-43E4-9119-793E93BBF126_ResultOutputXItem" name="Result"/>
          <bpmn2:inputSet id="_YAPzbmcREe26a_boTy7yow">
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_AdditionalParametersInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_RequestIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ApplicationIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_CIFInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_DrawingIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ErrorProcessInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_FacilityIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ObjectNameInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_PartyIdInputX</bpmn2:dataInputRefs>
            <bpmn2:dataInputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_TaskNameInputX</bpmn2:dataInputRefs>
          </bpmn2:inputSet>
          <bpmn2:outputSet id="_YAPzb2cREe26a_boTy7yow">
            <bpmn2:dataOutputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationOutputX</bpmn2:dataOutputRefs>
            <bpmn2:dataOutputRefs>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ResultOutputX</bpmn2:dataOutputRefs>
          </bpmn2:outputSet>
        </bpmn2:ioSpecification>
        <bpmn2:dataInputAssociation id="_YAPzcGcREe26a_boTy7yow">
          <bpmn2:sourceRef>additionalParams</bpmn2:sourceRef>
          <bpmn2:targetRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_AdditionalParametersInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_YAPzcWcREe26a_boTy7yow">
          <bpmn2:targetRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_YAPzcmcREe26a_boTy7yow">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzc2cREe26a_boTy7yow"><![CDATA[updateDocumentMetadata]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzdGcREe26a_boTy7yow">_C6A9582E-C1E8-43E4-9119-793E93BBF126_OperationNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_YAPzdWcREe26a_boTy7yow">
          <bpmn2:targetRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_YAPzdmcREe26a_boTy7yow">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzd2cREe26a_boTy7yow"><![CDATA[CorporateLOSJavaServices]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzeGcREe26a_boTy7yow">_C6A9582E-C1E8-43E4-9119-793E93BBF126_ServiceNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_YAPzeWcREe26a_boTy7yow">
          <bpmn2:sourceRef>requestId</bpmn2:sourceRef>
          <bpmn2:targetRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_RequestIdInputX</bpmn2:targetRef>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataInputAssociation id="_YAPzemcREe26a_boTy7yow">
          <bpmn2:targetRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_TaskNameInputX</bpmn2:targetRef>
          <bpmn2:assignment id="_YAPze2cREe26a_boTy7yow">
            <bpmn2:from xsi:type="bpmn2:tFormalExpression" id="_YAPzfGcREe26a_boTy7yow"><![CDATA[OriginationServiceTask]]></bpmn2:from>
            <bpmn2:to xsi:type="bpmn2:tFormalExpression" id="_YAPzfWcREe26a_boTy7yow">_C6A9582E-C1E8-43E4-9119-793E93BBF126_TaskNameInputX</bpmn2:to>
          </bpmn2:assignment>
        </bpmn2:dataInputAssociation>
        <bpmn2:dataOutputAssociation id="_YAPzfmcREe26a_boTy7yow">
          <bpmn2:sourceRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_AuthorizationOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>authorization</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
        <bpmn2:dataOutputAssociation id="_YAPzf2cREe26a_boTy7yow">
          <bpmn2:sourceRef>_C6A9582E-C1E8-43E4-9119-793E93BBF126_ResultOutputX</bpmn2:sourceRef>
          <bpmn2:targetRef>updateMetaDataResp</bpmn2:targetRef>
        </bpmn2:dataOutputAssociation>
      </bpmn2:task>
    </bpmn2:subProcess>
  </bpmn2:process>
  <bpmndi:BPMNDiagram id="_YAPzgGcREe26a_boTy7yow">
    <bpmndi:BPMNPlane id="_YAPzgWcREe26a_boTy7yow" bpmnElement="InfinityAssist.UpdateMortgageFacilitywitharrangementdetails">
      <bpmndi:BPMNShape id="shape__CD88045F-21E2-4F9B-B5B4-98204EE82249" bpmnElement="_CD88045F-21E2-4F9B-B5B4-98204EE82249">
        <dc:Bounds height="330.0" width="737.5" x="703.875" y="73.5"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__C6A9582E-C1E8-43E4-9119-793E93BBF126" bpmnElement="_C6A9582E-C1E8-43E4-9119-793E93BBF126">
        <dc:Bounds height="102.0" width="154.0" x="1003.0" y="182.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__C15A48E1-83F9-41DE-8979-20C1BDF23739" bpmnElement="_C15A48E1-83F9-41DE-8979-20C1BDF23739">
        <dc:Bounds height="56.0" width="56.0" x="1305.625" y="204.75"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__2AF72E01-03EB-43C2-8083-DB77C819326A" bpmnElement="_2AF72E01-03EB-43C2-8083-DB77C819326A">
        <dc:Bounds height="56.0" width="56.0" x="826.5" y="205.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__2AF72E01-03EB-43C2-8083-DB77C819326A_to_shape__C6A9582E-C1E8-43E4-9119-793E93BBF126" bpmnElement="_0D75A34C-A54C-471C-9A54-9192421109E2">
        <di:waypoint xsi:type="dc:Point" x="854.5" y="233.0"/>
        <di:waypoint xsi:type="dc:Point" x="1003.0" y="233.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__C6A9582E-C1E8-43E4-9119-793E93BBF126_to_shape__C15A48E1-83F9-41DE-8979-20C1BDF23739" bpmnElement="_8C91D077-14E1-4619-ACED-80002006A750">
        <di:waypoint xsi:type="dc:Point" x="1080.0" y="233.0"/>
        <di:waypoint xsi:type="dc:Point" x="1305.625" y="232.75"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="shape__42953A40-6061-45F6-AF50-59D2B0BBFDEB" bpmnElement="_42953A40-6061-45F6-AF50-59D2B0BBFDEB">
        <dc:Bounds height="56.0" width="56.0" x="343.0" y="211.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__282948BA-D78F-45AE-BDA1-2D88889A0EF3" bpmnElement="_282948BA-D78F-45AE-BDA1-2D88889A0EF3">
        <dc:Bounds height="56.0" width="56.0" x="1577.0" y="211.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="shape__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C" bpmnElement="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C">
        <dc:Bounds height="102.0" width="154.0" x="449.75" y="188.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="edge_shape__42953A40-6061-45F6-AF50-59D2B0BBFDEB_to_shape__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C" bpmnElement="_01938B01-C536-43D9-ACBF-D1BC23386514">
        <di:waypoint xsi:type="dc:Point" x="371.0" y="239.0"/>
        <di:waypoint xsi:type="dc:Point" x="449.75" y="239.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__CD88045F-21E2-4F9B-B5B4-98204EE82249_to_shape__282948BA-D78F-45AE-BDA1-2D88889A0EF3" bpmnElement="_EBF6A117-079A-4822-96FE-157A323D7203">
        <di:waypoint xsi:type="dc:Point" x="1072.625" y="238.5"/>
        <di:waypoint xsi:type="dc:Point" x="1577.0" y="239.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="edge_shape__9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C_to_shape__CD88045F-21E2-4F9B-B5B4-98204EE82249" bpmnElement="_633B273A-AC10-41D6-9354-6D4EB3034183">
        <di:waypoint xsi:type="dc:Point" x="526.75" y="239.0"/>
        <di:waypoint xsi:type="dc:Point" x="703.875" y="238.5"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
  <bpmn2:relationship id="_YAPzgmcREe26a_boTy7yow" type="BPSimData">
    <bpmn2:extensionElements>
      <bpsim:BPSimData>
        <bpsim:Scenario xsi:type="bpsim:Scenario" id="default" name="Simulationscenario">
          <bpsim:ScenarioParameters xsi:type="bpsim:ScenarioParameters"/>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_42953A40-6061-45F6-AF50-59D2B0BBFDEB" id="_YAPzg2cREe26a_boTy7yow">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
          </bpsim:ElementParameters>
          <bpsim:ElementParameters xsi:type="bpsim:ElementParameters" elementRef="_9DF02D3B-BCC5-4AA3-AC8E-9E53EB26ED1C" id="_YAPzhGcREe26a_boTy7yow">
            <bpsim:TimeParameters xsi:type="bpsim:TimeParameters">
              <bpsim:ProcessingTime xsi:type="bpsim:Parameter">
                <bpsim:NormalDistribution mean="0.0" standardDeviation="0.0"/>
              </bpsim:ProcessingTime>
            </bpsim:TimeParameters>
            <bpsim:ResourceParameters xsi:type="bpsim:ResourceParameters">
              <bpsim:Availability xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Availability>
              <bpsim:Quantity xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:Quantity>
            </bpsim:ResourceParameters>
            <bpsim:CostParameters xsi:type="bpsim:CostParameters">
              <bpsim:UnitCost xsi:type="bpsim:Parameter">
                <bpsim:FloatingParameter value="0.0"/>
              </bpsim:UnitCost>
            </bpsim:CostParameters>
          </bpsim:ElementParameters>
        </bpsim:Scenario>
      </bpsim:BPSimData>
    </bpmn2:extensionElements>
    <bpmn2:source>_YAPzUGcREe26a_boTy7yow</bpmn2:source>
    <bpmn2:target>_YAPzUGcREe26a_boTy7yow</bpmn2:target>
  </bpmn2:relationship>
</bpmn2:definitions>
